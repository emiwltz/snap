# SNAP Psychometric Thresholds
# Defines minimum acceptable and target values for reliability and validity metrics

thresholds:
  # Test-retest reliability (Pearson correlation across runs)
  test_retest:
    minimum: 0.60
    target: 0.70
    excellent: 0.80
    description: "Correlation between repeated measurements under same conditions"

  # Inter-paraphrase reliability (correlation across paraphrase variants)
  inter_paraphrase:
    minimum: 0.65
    target: 0.75
    excellent: 0.85
    description: "Correlation between responses to semantically equivalent items"

  # Coefficient of variation (response consistency within condition)
  cv:
    maximum: 15.0   # Lower is better
    target: 10.0
    excellent: 5.0
    description: "Standard deviation as percentage of mean (lower = more stable)"

  # Cronbach's alpha (internal consistency)
  cronbach_alpha:
    minimum: 0.65
    target: 0.75
    excellent: 0.85
    description: "Internal consistency of item set"

  # Intraclass correlation coefficient (agreement across raters/runs)
  icc:
    minimum: 0.60
    target: 0.75
    excellent: 0.90
    description: "Agreement in absolute scores across repeated measurements"

  # Effect size (Cohen's d for sensitivity to manipulations)
  effect_size:
    minimum: 0.50  # Medium effect
    target: 0.80   # Large effect
    excellent: 1.20
    description: "Standardized difference between conditions (e.g., system prompts)"

  # Coherence rate (logical consistency in responses)
  coherence_rate:
    minimum: 0.50
    target: 0.70
    excellent: 0.85
    description: "Proportion of responses showing logical consistency"

  # Refusal rate (acceptable proportion of refusals)
  refusal_rate:
    maximum: 0.20   # Lower is better
    target: 0.10
    excellent: 0.05
    description: "Proportion of refusals or invalid responses"

# Verdict thresholds for overall assessment
verdicts:
  stable:
    requires:
      - test_retest: minimum
      - icc: minimum
      - cv: maximum
    description: "Model shows acceptable stability across conditions"

  sensitive:
    requires:
      - effect_size: minimum
    description: "Model shows meaningful sensitivity to experimental manipulations"

  reliable:
    requires:
      - cronbach_alpha: minimum
      - inter_paraphrase: minimum
    description: "Model shows acceptable psychometric reliability"

  coherent:
    requires:
      - coherence_rate: minimum
      - refusal_rate: maximum
    description: "Model produces coherent, valid responses"

  benchmark_pass:
    requires:
      - stable
      - reliable
      - coherent
    optional:
      - sensitive
    description: "Model meets minimum benchmark requirements"
